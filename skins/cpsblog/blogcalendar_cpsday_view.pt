<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master">

<div metal:fill-slot="header">&nbsp;</div>

<div metal:fill-slot="main">

 <div metal:define-macro="dayViewBox"
      class="dayViewBox"
      tal:define="DateTime python:modules['DateTime'].DateTime;
                  this_day python:DateTime(request.get('date',
		                           DateTime().aCommon()[:12]))">

  <tal:block tal:define="items python:here.getBlogEntriesForThisDay(this_day, request);
                         format string:detail;
                         no_form python:1;
			 params python:here.getCustomDisplayParams();
			 Batch python:modules['Products.CPSBlog.CPSBatch'].Batch;
			 b_size params/items_per_page;
			 b_start python:0;
			 b_start request/b_start | b_start">

    <span tal:define="mq nocall:modules/ZTUtils/make_query"
	  tal:condition="python:len(items)==1"
          tal:content="python:request.response.redirect(items[0].absolute_url()+'?'+mq(request.form))" />
    <tal:block tal:condition="python:len(items)!=1">
      <h1><span tal:omit-tag=""
            i18n:translate="label_blog_calendar_entries_list">
            Blog entries published</span>
          <span tal:omit-tag="" tal:content="python:here.getDateStr(this_day, 'short')" />
      </h1>

      <tal:block define="doc here/getBlogContent"
		 condition="doc">
	<span tal:omit-tag=""
	      metal:use-macro="here/blog_entry_macros/macros/blog_entry_listing" />
      </tal:block>

    </tal:block>

  </tal:block>

 </div>
</div>

</html>
